<?php # =========================================================================##  boadmin.fns.php##  Written by Jeff Schroeder (jeff@neobox.net)#  Last modified: $Date: 2003/10/16 22:35:28 $# =========================================================================require_once('mod_core/core.inc.php');require_once('mod_template/template.fns.php');require_once('boadmin.inc.php');# ------------------------------------------------------------------------## TAG: endpage()## Finish rendering the page framework.## ------------------------------------------------------------------------function endpage(){  print '</td></tr></table>';  get("template.include_tpl", "footer_plain.tpl");  # Disconnect from the database, if it's been opened.  if($_HCG_GLOBAL['db_link']['boa']) $_HCG_GLOBAL['db_link']['boa']->close();}# ------------------------------------------------------------------------## TAG: startpage()## Begin rendering the page framework for a page in the BOAdmin section.# This includes the headers and navigation.## tabs      - an array containing the names (key) and page (value) of each tab.# activetab - the name of the active tab.## ------------------------------------------------------------------------function startpage($tabs = "", $activetab = ""){  global $_HCG_GLOBAL, $common_name;  $group_id = "Information Technology";  $access_level = get("ldapauth.access_level", $group_id);  $header = array();  $header{"access_level"} = $access_level;  $header{"common_name"} = $common_name;  $header{"group_name"} = $group_id;  $header{"title"} = "Hain Celestial Group Intranet: Business Object Admin";  $data = array();  $data{"tabs"} = $tabs;  $data{"activetab"} = $activetab;  # Build navigation based on rights.  $reqaccess = 10;  $data{"nav"} = array();  foreach($_HCG_GLOBAL{"boa_navigation"} as $key => $value)  {    if(substr($value, 0, 1) <= $access_level)      $data{"nav"}{$key} = substr($value, 2);    if(strtolower(basename($_SERVER{"PHP_SELF"})) == substr($value, 2))      $reqaccess = substr($value, 0);  }  # Check access rights.  if($access_level < $reqaccess)  {#    event("Insufficient access rights for page {$_SERVER{"PHP_SELF"}}!",#      "warning");    header("location: ldap_login.php");    exit;  }  # Load header.  get("template.include_tpl", "header_plain.tpl", $header);  # Load navigation tabs.  print    '<table border="0" cellspacing="0" cellpadding="0" width="100%">' .    '<tr><td>&nbsp;</td>' .    '<td align="left" valign="bottom">';  get("template.include_tpl", "boadmin_tabs.tpl", $data, "data");  # Load left-hand (main) navigation.  print '</td></tr><tr><td align="left" valign="top" width="200">';  get("template.include_tpl", "boadmin_nav.tpl", $data, "data");  # Start table-cell for content.  Everything dumped to the page after  # this will be placed in the content area of the page.  print '</td><td align="left" valign="top" class="content" height="400">';}?>